<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geoid Study Centre- Notice & Staff Portal</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f7f7f7; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .main-container { width: 100%; max-width: 1000px; background-color: #fff; box-shadow: 0 0 15px rgba(0,0,0,0.1); padding: 15px; border-radius: 4px; }
        .top-header { margin-bottom: 15px; }
        .aimes-logo { height: 45px; }
        .banner-section { width: 100%; margin-bottom: 25px; }
        .main-banner { width: 100%; height: auto; display: block; border: 1px solid #ddd; }
        .content-wrapper { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 20px; padding: 0 10px 20px 10px; }
        .notice-box, .login-box { flex: 1; min-width: 300px; border: 1px solid #ddd; border-radius: 4px; overflow: hidden; height: fit-content; }
        .box-header { padding: 10px 15px; font-weight: bold; font-size: 15px; }
        .green-header { background-color: #e2efd9; color: #3e7d3e; border-bottom: 1px solid #c3d6b5; }
        .yellow-header { background-color: #fff9e6; color: #856404; border-bottom: 1px solid #ffeeba; }
        .box-body { padding: 15px; min-height: 200px; max-height: 400px; overflow-y: auto; }
        .notice-item { border-bottom: 1px solid #eee; padding: 10px 0; font-size: 13.5px; color: #333; }
        .notice-date { font-size: 11px; color: #888; display: block; margin-top: 4px; }
        .input-field { width: 100%; padding: 10px; margin-bottom: 12px; border: 1px solid #ccc; border-radius: 3px; box-sizing: border-box; outline: none; }
        .login-btn { background-color: #5bc0de; color: white; border: none; padding: 10px 25px; border-radius: 4px; cursor: pointer; float: right; font-weight: bold; }
        #login-msg { color: red; font-size: 12px; margin-top: 50px; display: block; font-weight: bold; }
    </style>
</head>
<body>

    <div class="main-container">
        <header class="top-header">
            <img src="https://ik.imagekit.io/8v5m0fw9z/Black___Blue_Minimalist_Modern_Initial_Font_Logo-removebg-preview.png?updatedAt=1767436479923" class="aimes-logo">
        </header>

        <div class="banner-section">
            <img src="https://ik.imagekit.io/8v5m0fw9z/Blue%20and%20White%20Modern%20Coming%20Soon%20Email%20Header.png" class="main-banner">
        </div>

        <div class="content-wrapper">
            <div class="notice-box">
                <div class="box-header green-header">General Notice</div>
                <div class="box-body" id="public-notices">
                    <img src="https://indiapostgdsonline.gov.in/images/new.gif.png" class="new-icon" onerror="this.src='https://via.placeholder.com/30x15?text=NEW'"> 
            Alumni Website new, January-2026 is now live. Please register yourself in the candidate corner.
                </div>
            </div>

            <div class="login-box">
                <div class="box-header yellow-header">Staff Login</div>
                <div class="box-body">
                    <input type="email" id="email" placeholder="Email" class="input-field">
                    <input type="password" id="password" placeholder="Password" class="input-field">
                    <button class="login-btn" onclick="handleLogin()">Log in</button>
                    <span id="login-msg"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createClient } = supabase;
        const _supabase = createClient('https://jicthwhrtbflrzbolhvu.supabase.co', 'sb_publishable_O5uFeV0DzsGIbBLXYp01Yg_9uujflZS');

        async function loadNotices() {
            const container = document.getElementById('public-notices');
            const { data, error } = await _supabase.from('notices').select('*').order('created_at', { ascending: false });
            if (error) { container.innerHTML = "Error loading notices."; return; }
            if (!data || data.length === 0) { container.innerHTML = "No notices found."; return; }
            container.innerHTML = data.map(n => `
                <div class="notice-item">
                    <b>â€¢</b> ${n.content}
                    <span class="notice-date">Published: ${new Date(n.created_at).toLocaleDateString('bn-IN')}</span>
                </div>
            `).join('');
        }

        async function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const msg = document.getElementById('login-msg');
            msg.innerText = "Checking...";
            
            const { data, error } = await _supabase.auth.signInWithPassword({ email, password });
            if (error) { msg.innerText = "Login Failed: " + error.message; }
            else { window.location.href = 'staff-portal.html'; }
        }
        window.onload = loadNotices;
    </script>
</body>
</html>

